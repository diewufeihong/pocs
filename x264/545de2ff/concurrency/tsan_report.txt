[info]: indexing input file [5.2%]                                      ==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 8 at 0x7bc400014018 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3063:23 (x264+0x4f464c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f464c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous read of size 4 at 0x7bc400014018 by thread T2:
    #0 encoder_thread_init /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:416:18 (x264+0x4f25ca)
    #1 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:53:9 (x264+0x50b3df)
    #2 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc4000155f8 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc4000155f8 by thread T2:
    #0 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3085:25 (x264+0x4feab7)
    #1 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #2 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400015740 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400015740 by thread T2:
    #0 slice_header_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:291:25 (x264+0x504516)
    #1 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2707 (x264+0x504516)
    #2 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #3 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400016fd8 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400016fdc by thread T2:
    #0 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2704:16 (x264+0x502807)
    #1 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #2 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #3 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400016fe0 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400016fe0 by thread T2:
    #0 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2705:22 (x264+0x502835)
    #1 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #2 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #3 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400018bc0 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 8 at 0x7bc400018bc0 by thread T2:
    #0 x264_8_cabac_encode_init_core /home/ubuntu/work/x264/x264-tsan/common/cabac.c:55:17 (x264+0x584d03)
    #1 x264_8_cabac_encode_init /home/ubuntu/work/x264/x264-tsan/common/cabac.c:63 (x264+0x584d03)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2715:9 (x264+0x505723)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400018bd0 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 8 at 0x7bc400018bd0 by thread T2:
    #0 x264_8_cabac_encode_init /home/ubuntu/work/x264/x264-tsan/common/cabac.c:64:17 (x264+0x584d16)
    #1 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2715:9 (x264+0x505723)
    #2 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #3 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400018bd8 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 8 at 0x7bc400018bd8 by thread T2:
    #0 cabac_putbyte /home/ubuntu/work/x264/x264-tsan/common/cabac.c:95:20 (x264+0x585297)
    #1 x264_8_cabac_encode_ue_bypass /home/ubuntu/work/x264/x264-tsan/common/cabac.c:154 (x264+0x585297)
    #2 x264_8_cabac_block_residual_internal_avx512 <null> (x264+0x53af77)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2794:17 (x264+0x50684f)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400018be0 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 8 at 0x7bc400018be0 by thread T2:
    #0 x264_8_cabac_encode_init /home/ubuntu/work/x264/x264-tsan/common/cabac.c:66:17 (x264+0x584d30)
    #1 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2715:9 (x264+0x505723)
    #2 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #3 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400018c00 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 1 at 0x7bc400018c04 by thread T2:
    #0 memcpy <null> (x264+0x43fe27)
    #1 x264_8_cabac_context_init /home/ubuntu/work/x264/x264-tsan/common/cabac.c:50:5 (x264+0x584c9c)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2714:9 (x264+0x5056f1)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400019f60 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400019f64 by thread T2:
    #0 macroblock_cache_load_neighbours /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:707:41 (x264+0x56d56e)
    #1 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:856 (x264+0x56d56e)
    #2 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x56d56e)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400019f68 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400019f6c by thread T2:
    #0 macroblock_cache_load_neighbours /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:708:41 (x264+0x56d59d)
    #1 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:856 (x264+0x56d59d)
    #2 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x56d59d)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 4 at 0x7bc4000155f4 by thread T2:
    #0 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3119:26 (x264+0x4fecad)
    #1 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #2 x264_stack_align <null> (x264+0x5387eb)

  Previous read of size 8 at 0x7bc4000155f0 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3119:26 in slices_write
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400019f70 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400019f74 by thread T2:
    #0 macroblock_cache_load_neighbours /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:679:18 (x264+0x56d37e)
    #1 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:856 (x264+0x56d37e)
    #2 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x56d37e)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400019f78 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400019f78 by thread T2:
    #0 macroblock_cache_load_neighbours /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:680:19 (x264+0x56d3a8)
    #1 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:856 (x264+0x56d3a8)
    #2 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x56d3a8)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400019f80 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400019f84 by thread T2:
    #0 x264_8_macroblock_thread_init /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:503:23 (x264+0x56cf24)
    #1 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2699:5 (x264+0x5027c3)
    #2 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #3 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400019f88 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400019f88 by thread T2:
    #0 x264_8_macroblock_thread_init /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:504:27 (x264+0x56cf4b)
    #1 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2699:5 (x264+0x5027c3)
    #2 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #3 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400019f90 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400019f90 by thread T2:
    #0 mb_analyse_init_qp /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:261:21 (x264+0x5b6368)
    #1 mb_analyse_init /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:305:5 (x264+0x5a2beb)
    #2 x264_8_macroblock_analyse /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:2919 (x264+0x5a2beb)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2777:9 (x264+0x506440)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400019f98 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400019f98 by thread T2:
    #0 x264_8_macroblock_thread_init /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:510:26 (x264+0x56d031)
    #1 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2699:5 (x264+0x5027c3)
    #2 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #3 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400019fa0 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400019fa4 by thread T2:
    #0 macroblock_cache_load_neighbours_deblock /home/ubuntu/work/x264/x264-tsan/common/deblock.c:346:24 (x264+0x58cd59)
    #1 x264_8_frame_deblock_row /home/ubuntu/work/x264/x264-tsan/common/deblock.c:394 (x264+0x58cd59)
    #2 fdec_filter_row /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2374:13 (x264+0x508ea9)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3018:9 (x264+0x508810)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a020 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc40001a020 by thread T2:
    #0 macroblock_cache_load_neighbours /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:687:23 (x264+0x56d480)
    #1 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:856 (x264+0x56d480)
    #2 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x56d480)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a028 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc40001a02c by thread T2:
    #0 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1346:27 (x264+0x571457)
    #1 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x571457)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a030 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc40001a034 by thread T2:
    #0 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1338:27 (x264+0x5713f3)
    #1 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x5713f3)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a038 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc40001a038 by thread T2:
    #0 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1342:27 (x264+0x57140a)
    #1 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x57140a)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a040 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc40001a044 by thread T2:
    #0 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1341:27 (x264+0x571438)
    #1 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x571438)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a048 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc40001a048 by thread T2:
    #0 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1347:27 (x264+0x5714cb)
    #1 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x5714cb)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a050 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc40001a054 by thread T2:
    #0 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1344:27 (x264+0x571481)
    #1 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x571481)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a058 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc40001a05c by thread T2:
    #0 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1345:28 (x264+0x57146c)
    #1 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x57146c)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a070 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc40001a074 by thread T2:
    #0 macroblock_cache_load_neighbours /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:688:29 (x264+0x56d49f)
    #1 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:856 (x264+0x56d49f)
    #2 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x56d49f)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a078 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc40001a07c by thread T2:
    #0 macroblock_cache_load_neighbours /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:795:33 (x264+0x56d81d)
    #1 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:856 (x264+0x56d81d)
    #2 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x56d81d)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a080 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 8 at 0x7bc40001a080 by thread T2:
    #0 memset <null> (x264+0x440167)
    #1 macroblock_cache_load_neighbours /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:695:25 (x264+0x56d510)
    #2 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:856 (x264+0x56d510)
    #3 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x56d510)
    #4 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #5 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #6 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #7 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a090 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 1 at 0x7bc40001a096 by thread T2:
    #0 memset <null> (x264+0x440167)
    #1 macroblock_cache_load_neighbours /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:692:51 (x264+0x56d522)
    #2 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:856 (x264+0x56d522)
    #3 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x56d522)
    #4 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #5 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #6 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #7 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a0b0 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc40001a0b0 by thread T2:
    #0 macroblock_cache_load_neighbours /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:834:35 (x264+0x56db32)
    #1 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:856 (x264+0x56db32)
    #2 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x56db32)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a0b8 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 8 at 0x7bc40001a0b8 by thread T2:
    #0 macroblock_cache_load_neighbours /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:699:28 (x264+0x56d52f)
    #1 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:856 (x264+0x56d52f)
    #2 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x56d52f)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a0c0 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc40001a0c4 by thread T2:
    #0 macroblock_cache_load_neighbours /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:700:29 (x264+0x56d546)
    #1 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:856 (x264+0x56d546)
    #2 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x56d546)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a0c8 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc40001a0cc by thread T2:
    #0 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2722:31 (x264+0x5057dd)
    #1 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #2 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #3 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001e6e0 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3064:22 (x264+0x4f4664)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f4664)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 8 at 0x7bc40001e6e0 by thread T2:
    #0 memset <null> (x264+0x440167)
    #1 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3081:5 (x264+0x4fe9d9)
    #2 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #3 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
[0.5%] 1/182 frames, 3.83 fps, 606.48 kb/s, eta 0:00:47  ==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400040bd8 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 8 at 0x7bc400040bd8 by thread T2:
    #0 x264_8_cabac_encode_init /home/ubuntu/work/x264/x264-tsan/common/cabac.c:65:17 (x264+0x584d23)
    #1 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2715:9 (x264+0x505723)
    #2 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #3 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400041f78 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400041f7c by thread T2:
    #0 macroblock_cache_load_neighbours /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:681:19 (x264+0x56d3eb)
    #1 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:856 (x264+0x56d3eb)
    #2 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x56d3eb)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400041f80 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400041f80 by thread T2:
    #0 macroblock_cache_load_neighbours /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:682:19 (x264+0x56d432)
    #1 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:856 (x264+0x56d432)
    #2 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x56d432)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400041f88 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400041f8c by thread T2:
    #0 x264_8_macroblock_thread_init /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:507:23 (x264+0x56cfdc)
    #1 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2699:5 (x264+0x5027c3)
    #2 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #3 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400041fa0 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400041fa4 by thread T2:
    #0 macroblock_cache_load_neighbours_deblock /home/ubuntu/work/x264/x264-tsan/common/deblock.c:346:24 (x264+0x58cd59)
    #1 x264_8_frame_deblock_row /home/ubuntu/work/x264/x264-tsan/common/deblock.c:394 (x264+0x58cd59)
    #2 fdec_filter_row /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2374:13 (x264+0x508ea9)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2740:17 (x264+0x505ff2)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400041fa8 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400041fac by thread T2:
    #0 mb_analyse_init /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:336:25 (x264+0x5a3045)
    #1 x264_8_macroblock_analyse /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:2919 (x264+0x5a3045)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2777:9 (x264+0x506440)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400041fb0 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400041fb4 by thread T2:
    #0 mb_analyse_init /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:337:25 (x264+0x5a3075)
    #1 x264_8_macroblock_analyse /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:2919 (x264+0x5a3075)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2777:9 (x264+0x506440)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400041fb8 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400041fb8 by thread T2:
    #0 mb_analyse_init /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:392:33 (x264+0x5a4f41)
    #1 x264_8_macroblock_analyse /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:2919 (x264+0x5a4f41)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2777:9 (x264+0x506440)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400041fd0 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400041fd4 by thread T2:
    #0 mb_analyse_init /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:338:30 (x264+0x5a309c)
    #1 x264_8_macroblock_analyse /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:2919 (x264+0x5a309c)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2777:9 (x264+0x506440)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400041fd8 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400041fdc by thread T2:
    #0 mb_analyse_init /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:339:30 (x264+0x5a30ca)
    #1 x264_8_macroblock_analyse /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:2919 (x264+0x5a30ca)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2777:9 (x264+0x506440)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400041fe0 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400041fe0 by thread T2:
    #0 mb_analyse_init /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:394:38 (x264+0x5a4f86)
    #1 x264_8_macroblock_analyse /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:2919 (x264+0x5a4f86)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2777:9 (x264+0x506440)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400042000 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 2 at 0x7bc400042006 by thread T2:
    #0 mb_analyse_init /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c (x264+0x5a3927)
    #1 x264_8_macroblock_analyse /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:2919 (x264+0x5a3927)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2777:9 (x264+0x506440)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400042020 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc400042024 by thread T2:
    #0 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1339:27 (x264+0x5713de)
    #1 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x5713de)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 2 at 0x7bc400041330 by thread T2:
    #0 idct_dequant_2x2_dconly /home/ubuntu/work/x264/x264-tsan/encoder/macroblock.c:74:5 (x264+0x60391b)
    #1 mb_encode_chroma_internal /home/ubuntu/work/x264/x264-tsan/encoder/macroblock.c:458 (x264+0x60391b)
    #2 x264_8_mb_encode_chroma /home/ubuntu/work/x264/x264-tsan/encoder/macroblock.c:495 (x264+0x60391b)
    #3 macroblock_encode_internal /home/ubuntu/work/x264/x264-tsan/encoder/macroblock.c:940:9 (x264+0x60f5b3)
    #4 x264_8_macroblock_encode /home/ubuntu/work/x264/x264-tsan/encoder/macroblock.c:979 (x264+0x60f5b3)
    #5 rd_cost_mb /home/ubuntu/work/x264/x264-tsan/encoder/rdo.c:168:5 (x264+0x59bc50)
    #6 intra_rd /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:989:28 (x264+0x5b2e57)
    #7 x264_8_macroblock_analyse /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:3206:17 (x264+0x5af0ad)
    #8 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2777:9 (x264+0x506440)
    #9 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #10 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #11 x264_stack_align <null> (x264+0x5387eb)

  Previous read of size 8 at 0x7bc400041330 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race /home/ubuntu/work/x264/x264-tsan/encoder/macroblock.c:74:5 in idct_dequant_2x2_dconly
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400042038 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc40004203c by thread T2:
    #0 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1343:27 (x264+0x571496)
    #1 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x571496)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc400042088 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc40004208c by thread T2:
    #0 macroblock_cache_load_neighbours /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:835:38 (x264+0x56db70)
    #1 macroblock_cache_load /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:856 (x264+0x56db70)
    #2 x264_8_macroblock_cache_load_progressive /home/ubuntu/work/x264/x264-tsan/common/macroblock.c:1354 (x264+0x56db70)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2775:13 (x264+0x506433)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc4000420c8 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7bc4000420cc by thread T2:
    [failed to restore the stack]

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc4000466e0 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3064:22 (x264+0x4f4664)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f4664)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 8 at 0x7bc4000466e0 by thread T2:
    [failed to restore the stack]

  Location is heap block of size 74176 at 0x7bc40003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1685:9 (x264+0x4ee9eb)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7bc40001a000 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 2 at 0x7bc40001a000 by thread T2:
    #0 mb_analyse_init /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:348:35 (x264+0x5a31df)
    #1 x264_8_macroblock_analyse /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:2919 (x264+0x5a31df)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2777:9 (x264+0x506440)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 4 at 0x7ba0000e7e20 by thread T1 (mutexes: write M114):
    #0 x264_8_frame_cond_broadcast /home/ubuntu/work/x264/x264-tsan/common/frame.c:681:30 (x264+0x4e95d2)
    #1 fdec_filter_row /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2407:9 (x264+0x50930d)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3018:9 (x264+0x508810)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Previous read of size 4 at 0x7ba0000e7e20 by thread T2:
    #0 analyse_update_cache /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:3860:67 (x264+0x5b82d4)
    #1 mb_analyse_b_rd /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:2620:9 (x264+0x5b87e6)
    #2 x264_8_macroblock_analyse /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:3394:17 (x264+0x5a7411)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2777:9 (x264+0x506440)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 16176 at 0x7ba0000e4000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:82:5 (x264+0x4e9dfa)
    #3 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4e9dfa)
    #4 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c (x264+0x4f4d55)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #7 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #8 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #9 x264_stack_align <null> (x264+0x5387eb)
    #10 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Mutex M114 (0x7ba0000e7e30) created at:
    #0 pthread_mutex_init <null> (x264+0x42b04a)
    #1 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:294:9 (x264+0x4ec4b3)
    #2 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4ec4b3)
    #3 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c (x264+0x4f4d55)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #6 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #7 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #8 x264_stack_align <null> (x264+0x5387eb)
    #9 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T1 (tid=65159, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race /home/ubuntu/work/x264/x264-tsan/common/frame.c:681:30 in x264_8_frame_cond_broadcast
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 4 at 0x7ba00003fe28 by main thread:
    #0 x264_8_frame_push_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:767:5 (x264+0x4e9bd8)
    #1 encoder_frame_end /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3866:5 (x264+0x4fc607)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c (x264+0x4fb8c4)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7ba00003fe28 by thread T3:
    #0 x264_8_frame_push_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:768:29 (x264+0x4e9beb)
    #1 lookahead_update_last_nonb /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:62:9 (x264+0x50abdd)
    #2 lookahead_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:72 (x264+0x50abdd)
    #3 lookahead_thread_internal /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:108:13 (x264+0x50a9b9)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 16176 at 0x7ba00003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:82:5 (x264+0x4e9dfa)
    #3 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4e9dfa)
    #4 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3281:30 (x264+0x4f4b9c)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #7 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #8 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #9 x264_stack_align <null> (x264+0x5387eb)
    #10 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T3 (tid=65161, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_lookahead_init /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:160:9 (x264+0x509f2f)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1729:9 (x264+0x4eed3d)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race /home/ubuntu/work/x264/x264-tsan/common/frame.c:767:5 in x264_8_frame_push_unused
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 4 at 0x7ba00003c018 by main thread:
    #0 x264_8_frame_copy_picture /home/ubuntu/work/x264/x264-tsan/common/frame.c (x264+0x4e0917)
    #1 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3285:13 (x264+0x4f4bbb)
    #2 x264_stack_align <null> (x264+0x5387eb)
    #3 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #4 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #5 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #6 x264_stack_align <null> (x264+0x5387eb)
    #7 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous read of size 4 at 0x7ba00003c018 by thread T3:
    #0 x264_8_slicetype_analyse /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:1685:45 (x264+0x5bfa30)
    #1 x264_8_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:1790:9 (x264+0x5c16eb)
    #2 lookahead_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:70:5 (x264+0x50ab8f)
    #3 lookahead_thread_internal /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:108:13 (x264+0x50a9b9)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 16176 at 0x7ba00003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:82:5 (x264+0x4e9dfa)
    #3 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4e9dfa)
    #4 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3281:30 (x264+0x4f4b9c)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #7 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #8 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #9 x264_stack_align <null> (x264+0x5387eb)
    #10 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T3 (tid=65161, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_lookahead_init /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:160:9 (x264+0x509f2f)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1729:9 (x264+0x4eed3d)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race /home/ubuntu/work/x264/x264-tsan/common/frame.c in x264_8_frame_copy_picture
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 4 at 0x7ba00003c068 by main thread:
    #0 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3292:23 (x264+0x4f4c44)
    #1 x264_stack_align <null> (x264+0x5387eb)
    #2 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #3 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #4 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous read of size 4 at 0x7ba00003c068 by thread T3:
    #0 x264_8_slicetype_analyse /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:1498:55 (x264+0x5bdf4c)
    #1 x264_8_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:1790:9 (x264+0x5c16eb)
    #2 lookahead_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:70:5 (x264+0x50ab8f)
    #3 lookahead_thread_internal /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:108:13 (x264+0x50a9b9)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 16176 at 0x7ba00003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:82:5 (x264+0x4e9dfa)
    #3 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4e9dfa)
    #4 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3281:30 (x264+0x4f4b9c)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #7 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #8 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #9 x264_stack_align <null> (x264+0x5387eb)
    #10 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T3 (tid=65161, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_lookahead_init /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:160:9 (x264+0x509f2f)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1729:9 (x264+0x4eed3d)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3292:23 in x264_8_encoder_encode
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 2 at 0x7bc400019330 by thread T2:
    #0 idct_dequant_2x2_dconly /home/ubuntu/work/x264/x264-tsan/encoder/macroblock.c:74:5 (x264+0x600f06)
    #1 mb_encode_chroma_internal /home/ubuntu/work/x264/x264-tsan/encoder/macroblock.c:330 (x264+0x600f06)
    #2 x264_8_mb_encode_chroma /home/ubuntu/work/x264/x264-tsan/encoder/macroblock.c:495 (x264+0x600f06)
    #3 macroblock_encode_internal /home/ubuntu/work/x264/x264-tsan/encoder/macroblock.c:940:9 (x264+0x60f5b3)
    #4 x264_8_macroblock_encode /home/ubuntu/work/x264/x264-tsan/encoder/macroblock.c:979 (x264+0x60f5b3)
    #5 rd_cost_mb /home/ubuntu/work/x264/x264-tsan/encoder/rdo.c:168:5 (x264+0x59bc50)
    #6 mb_analyse_b_rd /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:2621:30 (x264+0x5b87fa)
    #7 x264_8_macroblock_analyse /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:3394:17 (x264+0x5a7411)
    #8 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2777:9 (x264+0x506440)
    #9 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #10 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #11 x264_stack_align <null> (x264+0x5387eb)

  Previous read of size 8 at 0x7bc400019330 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 thread_sync_context /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3062:5 (x264+0x4f463c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3256 (x264+0x4f463c)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Location is heap block of size 74176 at 0x7bc400014000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1460:5 (x264+0x4ed39a)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race /home/ubuntu/work/x264/x264-tsan/encoder/macroblock.c:74:5 in idct_dequant_2x2_dconly
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 1 at 0x7ba00003f10c by main thread:
    #0 memset <null> (x264+0x440167)
    #1 x264_8_adaptive_quant_frame /home/ubuntu/work/x264/x264-tsan/encoder/ratecontrol.c:308:31 (x264+0x5e0a9c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3330:13 (x264+0x4f5369)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous read of size 4 at 0x7ba00003f10c by thread T3:
    #0 x264_8_weights_analyse /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:305:37 (x264+0x5ba40d)
    #1 x264_8_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:1935:9 (x264+0x5c2199)
    #2 lookahead_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:70:5 (x264+0x50ab8f)
    #3 lookahead_thread_internal /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:108:13 (x264+0x50a9b9)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 16176 at 0x7ba00003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:82:5 (x264+0x4e9dfa)
    #3 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4e9dfa)
    #4 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3281:30 (x264+0x4f4b9c)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #7 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #8 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #9 x264_stack_align <null> (x264+0x5387eb)
    #10 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T3 (tid=65161, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_lookahead_init /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:160:9 (x264+0x509f2f)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1729:9 (x264+0x4eed3d)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x440167) in memset
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 8 at 0x7ba00003f110 by main thread:
    #0 memset <null> (x264+0x440167)
    #1 x264_8_adaptive_quant_frame /home/ubuntu/work/x264/x264-tsan/encoder/ratecontrol.c:308:31 (x264+0x5e0a9c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3330:13 (x264+0x4f5369)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous read of size 4 at 0x7ba00003f114 by thread T3:
    #0 x264_8_weights_analyse /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:305:37 (x264+0x5ba6ff)
    #1 x264_8_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:1935:9 (x264+0x5c2199)
    #2 lookahead_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:70:5 (x264+0x50ab8f)
    #3 lookahead_thread_internal /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:108:13 (x264+0x50a9b9)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 16176 at 0x7ba00003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:82:5 (x264+0x4e9dfa)
    #3 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4e9dfa)
    #4 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3281:30 (x264+0x4f4b9c)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #7 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #8 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #9 x264_stack_align <null> (x264+0x5387eb)
    #10 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T3 (tid=65161, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_lookahead_init /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:160:9 (x264+0x509f2f)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1729:9 (x264+0x4eed3d)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x440167) in memset
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 8 at 0x7ba00003f118 by main thread:
    #0 memset <null> (x264+0x440167)
    #1 x264_8_adaptive_quant_frame /home/ubuntu/work/x264/x264-tsan/encoder/ratecontrol.c:308:31 (x264+0x5e0a9c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3330:13 (x264+0x4f5369)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous read of size 8 at 0x7ba00003f118 by thread T3:
    #0 x264_8_weights_analyse /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:300:26 (x264+0x5ba2be)
    #1 x264_8_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:1935:9 (x264+0x5c2199)
    #2 lookahead_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:70:5 (x264+0x50ab8f)
    #3 lookahead_thread_internal /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:108:13 (x264+0x50a9b9)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 16176 at 0x7ba00003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:82:5 (x264+0x4e9dfa)
    #3 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4e9dfa)
    #4 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3281:30 (x264+0x4f4b9c)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #7 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #8 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #9 x264_stack_align <null> (x264+0x5387eb)
    #10 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T3 (tid=65161, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_lookahead_init /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:160:9 (x264+0x509f2f)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1729:9 (x264+0x4eed3d)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x440167) in memset
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 8 at 0x7ba00003f120 by main thread:
    #0 memset <null> (x264+0x440167)
    #1 x264_8_adaptive_quant_frame /home/ubuntu/work/x264/x264-tsan/encoder/ratecontrol.c:308:31 (x264+0x5e0a9c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3330:13 (x264+0x4f5369)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous read of size 8 at 0x7ba00003f120 by thread T3:
    #0 x264_8_weights_analyse /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:300:26 (x264+0x5ba44e)
    #1 x264_8_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:1935:9 (x264+0x5c2199)
    #2 lookahead_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:70:5 (x264+0x50ab8f)
    #3 lookahead_thread_internal /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:108:13 (x264+0x50a9b9)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 16176 at 0x7ba00003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:82:5 (x264+0x4e9dfa)
    #3 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4e9dfa)
    #4 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3281:30 (x264+0x4f4b9c)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #7 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #8 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #9 x264_stack_align <null> (x264+0x5387eb)
    #10 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T3 (tid=65161, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_lookahead_init /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:160:9 (x264+0x509f2f)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1729:9 (x264+0x4eed3d)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x440167) in memset
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 8 at 0x7ba00003f128 by main thread:
    #0 memset <null> (x264+0x440167)
    #1 x264_8_adaptive_quant_frame /home/ubuntu/work/x264/x264-tsan/encoder/ratecontrol.c:308:31 (x264+0x5e0a9c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3330:13 (x264+0x4f5369)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous read of size 8 at 0x7ba00003f128 by thread T3:
    #0 x264_8_weights_analyse /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:300:26 (x264+0x5ba5c3)
    #1 x264_8_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:1935:9 (x264+0x5c2199)
    #2 lookahead_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:70:5 (x264+0x50ab8f)
    #3 lookahead_thread_internal /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:108:13 (x264+0x50a9b9)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 16176 at 0x7ba00003c000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:82:5 (x264+0x4e9dfa)
    #3 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4e9dfa)
    #4 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3281:30 (x264+0x4f4b9c)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #7 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #8 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #9 x264_stack_align <null> (x264+0x5387eb)
    #10 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T3 (tid=65161, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_lookahead_init /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:160:9 (x264+0x509f2f)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1729:9 (x264+0x4eed3d)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x440167) in memset
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 8 at 0x7ba0000f3e20 by main thread:
    #0 memcpy <null> (x264+0x43fe27)
    #1 weighted_reference_duplicate /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2102:17 (x264+0x4f6298)
    #2 reference_build_list /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2311 (x264+0x4f6298)
    #3 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3495 (x264+0x4f6298)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #6 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #7 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #8 x264_stack_align <null> (x264+0x5387eb)
    #9 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7ba0000f3e20 by thread T1 (mutexes: write M115):
    #0 x264_8_frame_cond_broadcast /home/ubuntu/work/x264/x264-tsan/common/frame.c:681:30 (x264+0x4e95d2)
    #1 fdec_filter_row /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2407:9 (x264+0x50930d)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2740:17 (x264+0x505ff2)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 16176 at 0x7ba0000f0000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:82:5 (x264+0x4e9dfa)
    #3 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4e9dfa)
    #4 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c (x264+0x4f4d55)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #7 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #8 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #9 x264_stack_align <null> (x264+0x5387eb)
    #10 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Mutex M115 (0x7ba0000f3e30) created at:
    #0 pthread_mutex_init <null> (x264+0x42b04a)
    #1 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:294:9 (x264+0x4ec4b3)
    #2 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4ec4b3)
    #3 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c (x264+0x4f4d55)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #6 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #7 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #8 x264_stack_align <null> (x264+0x5387eb)
    #9 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T1 (tid=65159, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x43fe27) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 4 at 0x7ba0000ffe20 by thread T1 (mutexes: write M116):
    #0 x264_8_frame_cond_broadcast /home/ubuntu/work/x264/x264-tsan/common/frame.c:681:30 (x264+0x4e95d2)
    #1 fdec_filter_row /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2407:9 (x264+0x50930d)
    #2 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2740:17 (x264+0x505ff2)
    #3 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #4 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Previous read of size 4 at 0x7ba0000ffe20 by thread T2:
    #0 analyse_update_cache /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:3860:67 (x264+0x5b82d4)
    #1 mb_analyse_b_rd /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:2620:9 (x264+0x5b87e6)
    #2 x264_8_macroblock_analyse /home/ubuntu/work/x264/x264-tsan/encoder/analyse.c:3394:17 (x264+0x5a7411)
    #3 slice_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:2777:9 (x264+0x506440)
    #4 slices_write /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3117:13 (x264+0x4fec88)
    #5 threadpool_thread_internal /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:69:20 (x264+0x50b4cb)
    #6 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 16176 at 0x7ba0000fc000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:82:5 (x264+0x4e9dfa)
    #3 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4e9dfa)
    #4 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c (x264+0x4f4d55)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #7 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #8 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #9 x264_stack_align <null> (x264+0x5387eb)
    #10 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Mutex M116 (0x7ba0000ffe30) created at:
    #0 pthread_mutex_init <null> (x264+0x42b04a)
    #1 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:294:9 (x264+0x4ec4b3)
    #2 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4ec4b3)
    #3 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c (x264+0x4f4d55)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #6 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #7 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #8 x264_stack_align <null> (x264+0x5387eb)
    #9 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T1 (tid=65159, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T2 (tid=65160, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_threadpool_init /home/ubuntu/work/x264/x264-tsan/common/threadpool.c:111:13 (x264+0x50af3d)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1665:9 (x264+0x4ee904)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race /home/ubuntu/work/x264/x264-tsan/common/frame.c:681:30 in x264_8_frame_cond_broadcast
==================
[11.5%] 21/182 frames, 39.99 fps, 246.43 kb/s, eta 0:00:04  [23.6%] 43/182 frames, 55.37 fps, 308.39 kb/s, eta 0:00:02  [34.1%] 62/182 frames, 59.93 fps, 336.99 kb/s, eta 0:00:02  [44.5%] 81/182 frames, 62.60 fps, 381.25 kb/s, eta 0:00:01  ==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 4 at 0x7ba0000dc068 by main thread:
    #0 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3292:23 (x264+0x4f4c44)
    #1 x264_stack_align <null> (x264+0x5387eb)
    #2 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #3 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #4 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous read of size 4 at 0x7ba0000dc068 by thread T3:
    [failed to restore the stack]

  Location is heap block of size 16176 at 0x7ba0000dc000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:82:5 (x264+0x4e9dfa)
    #3 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4e9dfa)
    #4 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3281:30 (x264+0x4f4b9c)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #7 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #8 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #9 x264_stack_align <null> (x264+0x5387eb)
    #10 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T3 (tid=65161, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_lookahead_init /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:160:9 (x264+0x509f2f)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1729:9 (x264+0x4eed3d)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3292:23 in x264_8_encoder_encode
==================
[53.8%] 98/182 frames, 63.17 fps, 384.23 kb/s, eta 0:00:01  ==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 4 at 0x7ba000038014 by main thread:
    #0 x264_8_frame_copy_picture /home/ubuntu/work/x264/x264-tsan/common/frame.c:395:21 (x264+0x4e0924)
    #1 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3285:13 (x264+0x4f4bbb)
    #2 x264_stack_align <null> (x264+0x5387eb)
    #3 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #4 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #5 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #6 x264_stack_align <null> (x264+0x5387eb)
    #7 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous read of size 4 at 0x7ba000038014 by thread T3:
    #0 macroblock_tree /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:1129:16 (x264+0x5c0b35)
    #1 x264_8_slicetype_analyse /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:1671:9 (x264+0x5bf926)
    #2 x264_8_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:1790:9 (x264+0x5c16eb)
    #3 lookahead_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:70:5 (x264+0x50ab8f)
    #4 lookahead_thread_internal /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:108:13 (x264+0x50a9b9)
    #5 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 16176 at 0x7ba000038000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:82:5 (x264+0x4e9dfa)
    #3 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4e9dfa)
    #4 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3281:30 (x264+0x4f4b9c)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #7 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #8 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #9 x264_stack_align <null> (x264+0x5387eb)
    #10 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T3 (tid=65161, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_lookahead_init /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:160:9 (x264+0x509f2f)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1729:9 (x264+0x4eed3d)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race /home/ubuntu/work/x264/x264-tsan/common/frame.c:395:21 in x264_8_frame_copy_picture
==================
==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Write of size 8 at 0x7ba00004b110 by main thread:
    #0 memset <null> (x264+0x440167)
    #1 x264_8_adaptive_quant_frame /home/ubuntu/work/x264/x264-tsan/encoder/ratecontrol.c:308:31 (x264+0x5e0a9c)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3330:13 (x264+0x4f5369)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous read of size 4 at 0x7ba00004b110 by thread T3:
    #0 x264_8_weights_analyse /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:305:37 (x264+0x5ba599)
    #1 x264_8_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/slicetype.c:1935:9 (x264+0x5c2199)
    #2 lookahead_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:70:5 (x264+0x50ab8f)
    #3 lookahead_thread_internal /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:108:13 (x264+0x50a9b9)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 16176 at 0x7ba000048000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:82:5 (x264+0x4e9dfa)
    #3 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4e9dfa)
    #4 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3281:30 (x264+0x4f4b9c)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #7 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #8 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #9 x264_stack_align <null> (x264+0x5387eb)
    #10 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T3 (tid=65161, running) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_lookahead_init /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:160:9 (x264+0x509f2f)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1729:9 (x264+0x4eed3d)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race (/home/ubuntu/work/x264/x264-tsan/install/bin/x264+0x440167) in memset
==================
[63.2%] 115/182 frames, 63.79 fps, 381.20 kb/s, eta 0:00:01  [73.6%] 134/182 frames, 65.11 fps, 383.44 kb/s, eta 0:00:00  ==================
WARNING: ThreadSanitizer: data race (pid=65151)
  Read of size 4 at 0x7ba000027e28 by main thread:
    #0 x264_8_frame_push_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:767:5 (x264+0x4e9bd8)
    #1 encoder_frame_end /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3866:5 (x264+0x4fc607)
    #2 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c (x264+0x4fb8c4)
    #3 x264_stack_align <null> (x264+0x5387eb)
    #4 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbf21)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2042 (x264+0x4bbf21)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbf21)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Previous write of size 4 at 0x7ba000027e28 by thread T3:
    #0 x264_8_frame_push_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:768:29 (x264+0x4e9beb)
    #1 lookahead_update_last_nonb /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:62:9 (x264+0x50abdd)
    #2 lookahead_slicetype_decide /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:72 (x264+0x50abdd)
    #3 lookahead_thread_internal /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:117:9 (x264+0x50aae7)
    #4 x264_stack_align <null> (x264+0x5387eb)

  Location is heap block of size 16176 at 0x7ba000024000 allocated by main thread:
    #0 memalign <null> (x264+0x43b5cd)
    #1 x264_malloc /home/ubuntu/work/x264/x264-tsan/common/base.c:124:21 (x264+0x4d7c36)
    #2 frame_new /home/ubuntu/work/x264/x264-tsan/common/frame.c:82:5 (x264+0x4e9dfa)
    #3 x264_8_frame_pop_unused /home/ubuntu/work/x264/x264-tsan/common/frame.c:779 (x264+0x4e9dfa)
    #4 x264_8_encoder_encode /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:3281:30 (x264+0x4f4b9c)
    #5 x264_stack_align <null> (x264+0x5387eb)
    #6 encode_frame /home/ubuntu/work/x264/x264-tsan/x264.c:1851:20 (x264+0x4bbcc0)
    #7 encode /home/ubuntu/work/x264/x264-tsan/x264.c:2017 (x264+0x4bbcc0)
    #8 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bbcc0)
    #9 x264_stack_align <null> (x264+0x5387eb)
    #10 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

  Thread T3 (tid=65161, finished) created by main thread at:
    #0 pthread_create <null> (x264+0x42ad56)
    #1 x264_8_lookahead_init /home/ubuntu/work/x264/x264-tsan/encoder/lookahead.c:160:9 (x264+0x509f2f)
    #2 x264_8_encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/encoder.c:1729:9 (x264+0x4eed3d)
    #3 encoder_open /home/ubuntu/work/x264/x264-tsan/encoder/api.c:95:21 (x264+0x4e0196)
    #4 x264_stack_align <null> (x264+0x5387eb)
    #5 encode /home/ubuntu/work/x264/x264-tsan/x264.c:1950:9 (x264+0x4bb65d)
    #6 main_internal /home/ubuntu/work/x264/x264-tsan/x264.c:388 (x264+0x4bb65d)
    #7 x264_stack_align <null> (x264+0x5387eb)
    #8 __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 (libc.so.6+0x21b96)

SUMMARY: ThreadSanitizer: data race /home/ubuntu/work/x264/x264-tsan/common/frame.c:767:5 in x264_8_frame_push_unused
==================
[85.2%] 155/182 frames, 66.95 fps, 383.40 kb/s, eta 0:00:00  [96.7%] 176/182 frames, 68.49 fps, 384.55 kb/s, eta 0:00:00                                                                                 
encoded 182 frames, 69.03 fps, 385.19 kb/s
ThreadSanitizer: reported 72 warnings
